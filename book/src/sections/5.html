<section id='refactoring'>
  <div class='grid'>
    <div class='text'>
      <h2>
        <a href='#refactoring' class='anchor'>¶</a>
        Рефакторинг
      </h2>
    </div>
  </div>
  <div class='grid'>
    <div class='text'>
      <p>Теперь, когда у нас есть тесты, мы можем приступить к рефакторингу кода.</p>
      <p>Вынесем класс в отдельный файл, импортируем его в файл теста.</p>
      <p>Также вынесем создание экземпляра класса в <i>beforeEach</i>, который вызывается перед каждым тестом. Так возможное изменение конструктора затронет только одно место.</p>
      <p>Начальное состояние игры тоже может понадобиться в нескольких тестах, поэтому вынесем его в константу.</p>
      <p>Чтобы проверить, что ничего не сломалось, запускаем тесты. Если они зелёные, можем двигаться дальше.</p>
    </div>

    <div class='code'>
      <pre><div class='code-filename'>src/Game.js</div><code class='language-js line-numbers'>export default class Game {
  getState() {
    return [
      ['', '', ''],
      ['', '', ''],
      ['', '', '']
    ]
  }
}</code></pre>
<pre><div class='code-filename'>test/game.js</div><code class='language-js line-numbers'>import {expect} from 'chai'
import Game from '../src/Game'

const initialGameBoard = [
  ['', '', ''],
  ['', '', ''],
  ['', '', '']
]

let game
beforeEach(() => { game = new Game() })

describe('Game', () => {
  it('Should return empty game board', () => {
    const board = game.getState()
    
    expect(board).to.deep.equal(initialGameBoard)
  })
})</code></pre>
    </div>
  </div>
</section>